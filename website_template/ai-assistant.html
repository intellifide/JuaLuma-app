<!DOCTYPE html>
<!-- Last Updated: December 05, 2025 at 09:33 PM -->
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="JuaLuma AI Assistant - Get insights about your finances with AI-powered analysis.">
  <title>AI Assistant - JuaLuma</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#6B46C1">
  <link rel="icon" href="assets/JuaLuma-logo.png">
  <link rel="apple-touch-icon" href="assets/JuaLuma-logo.png">
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .chat-container {
      display: flex;
      flex-direction: column;
      height: 600px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      overflow: hidden;
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-lg);
      display: flex;
      flex-direction: column;
      gap: var(--spacing-md);
    }

    .chat-message {
      display: flex;
      flex-direction: column;
      max-width: 75%;
      padding: var(--spacing-md);
      border-radius: var(--border-radius);
      word-wrap: break-word;
    }

    .chat-message-user {
      align-self: flex-end;
      background: var(--color-primary);
      color: var(--text-inverse);
    }

    .chat-message-assistant {
      align-self: flex-start;
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
    }

    .chat-message-time {
      font-size: var(--font-size-xs);
      color: var(--text-muted);
      margin-top: var(--spacing-xs);
      opacity: 0.7;
    }

    .chat-input-container {
      display: flex;
      gap: var(--spacing-sm);
      padding: var(--spacing-md);
      border-top: 1px solid var(--border-color);
      background: var(--bg-secondary);
    }

    .chat-input {
      flex: 1;
      padding: var(--spacing-sm) var(--spacing-md);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: var(--font-size-base);
      font-family: var(--font-family);
    }

    .chat-send {
      padding: var(--spacing-sm) var(--spacing-lg);
    }

    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: var(--spacing-sm) 0;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      background: var(--text-muted);
      border-radius: 50%;
      animation: typing 1.4s infinite;
    }

    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }

    .policy-scroll {
      max-height: 340px;
      overflow-y: auto;
      padding: var(--spacing-md);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      background: var(--bg-primary);
    }

    .policy-scroll-footer {
      font-size: var(--font-size-xs);
      color: var(--text-muted);
      margin-top: var(--spacing-sm);
    }

    @keyframes typing {

      0%,
      60%,
      100% {
        opacity: 0.3;
      }

      30% {
        opacity: 1;
      }
    }

    .chat-typing {
      align-self: flex-start;
    }

    .preview-badge {
      display: inline-block;
      padding: var(--spacing-xs) var(--spacing-sm);
      background: var(--color-accent);
      color: var(--text-inverse);
      border-radius: var(--border-radius);
      font-size: var(--font-size-xs);
      font-weight: 600;
      margin-bottom: var(--spacing-md);
    }
  </style>
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <header class="header">
    <div class="header-container">
      <a href="dashboard.html" class="logo"><img src="assets/JuaLuma-logo.png" alt="JuaLuma logo" class="logo-img"><span
          class="sr-only">JuaLuma</span></a>
      <nav class="nav" aria-label="Main navigation">
        <a href="dashboard.html" class="nav-link">Dashboard</a>
        <a href="ai-assistant.html" class="nav-link active">AI Assistant</a>
        <a href="settings.html" class="nav-link">Settings</a>
        <a href="index.html" class="nav-link logout-link">Logout</a>
      </nav>
      <button class="nav-mobile-toggle" aria-label="Toggle mobile menu" aria-expanded="false">‚ò∞</button>
      <button class="theme-toggle" aria-label="Toggle dark mode">üåô</button>
    </div>
    <nav class="nav-mobile" aria-label="Mobile navigation">
      <a href="dashboard.html" class="nav-link">Dashboard</a>
      <a href="ai-assistant.html" class="nav-link">AI Assistant</a>
      <a href="settings.html" class="nav-link">Settings</a>
      <a href="index.html" class="nav-link logout-link">Logout</a>
    </nav>
  </header>

  <main id="main-content">
    <section class="container container-narrow" style="padding: var(--spacing-xl) 0;">
      <h1 style="margin-bottom: var(--spacing-md);">AI Assistant</h1>

      <div class="alert alert-info" style="margin-bottom: var(--spacing-lg);">
        <strong>Important Disclaimer:</strong> The AI Assistant provides access to third-party large language models. It
        is NOT a financial, investment, tax, or legal advisor. Its responses are not endorsed or verified by
        Intellifide, LLC and may be inaccurate or inappropriate. You must not rely on the AI for any financial
        decisions. All investments carry risk, and you must consult a qualified professional.
        <p style="margin-top: var(--spacing-sm);">
          <a href="legal/ai-disclaimer.html">View full AI Assistant Disclaimer</a>
        </p>
      </div>

      <!-- Privacy/User Agreement Modal (shown on page load for subscribed users) -->
      <div id="privacy-agreement-modal" class="modal" aria-hidden="true" role="dialog"
        aria-labelledby="privacy-modal-title">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="privacy-modal-title">Privacy & User Agreement</h2>
            <button class="modal-close" aria-label="Close modal">√ó</button>
          </div>
          <div class="modal-body">
            <div class="policy-scroll" id="privacy-policy-scroll" tabindex="0"
              aria-label="AI Assistant disclaimer - scroll to read full text before accepting">
              <p><strong>AI Assistant Disclaimer and User Acknowledgment</strong></p>
              <p>The JuaLuma AI Assistant provides access to third-party large language models (Vertex AI Gemini). It is
                <strong>not</strong> a financial, investment, tax, or legal advisor.</p>
              <h3>1. No Advice</h3>
              <ul>
                <li>Not a financial, investment, tax, or legal advisor.</li>
                <li>Responses are not endorsed or verified and may be inaccurate or inappropriate.</li>
              </ul>
              <h3>2. Your Responsibility</h3>
              <ul>
                <li>Do not rely on AI responses for financial decisions.</li>
                <li>Consult qualified professionals for financial, investment, tax, or legal matters.</li>
                <li>You use the AI Assistant at your own risk.</li>
              </ul>
              <h3>3. No Liability</h3>
              <ul>
                <li>Intellifide, LLC disclaims liability for decisions based on AI responses.</li>
                <li>No warranties on accuracy, completeness, or appropriateness.</li>
              </ul>
              <h3>4. Data & Privacy</h3>
              <ul>
                <li>AI chat history has no retention limits; transactions remain visible.</li>
                <li>Use is subject to the Terms of Service and Privacy Policy.</li>
              </ul>
              <h3>5. Third-Party Services</h3>
              <ul>
                <li>Uses third-party LLM services (Vertex AI); their terms and privacy policies apply.</li>
              </ul>
              <h3>6. Acknowledgment</h3>
              <ul>
                <li>By accepting, you confirm you have read and understand this disclaimer and accept all risks.</li>
              </ul>
            </div>
            <p id="privacy-scroll-hint" class="policy-scroll-footer">Scroll to the bottom to enable ‚ÄúAccept & Continue‚Äù.
            </p>
            <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-lg);">
              <button id="accept-privacy" class="btn btn-primary" style="flex: 1;" disabled aria-disabled="true">Accept
                & Continue</button>
              <button id="deny-privacy" class="btn btn-outline" style="flex: 1;">Cancel</button>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Assistant Chat Interface (blocked until privacy agreement accepted) -->
      <div class="glass-panel" style="margin-bottom: var(--spacing-lg);" id="ai-chat-wrapper">
        <div
          style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md);">
          <div>
            <h2 style="margin: 0;">Chat with your AI Assistant</h2>
          </div>
          <div>
            <span class="badge" id="quota-badge">Quota: 0/20 queries today</span>
            <p
              style="font-size: var(--font-size-xs); color: var(--text-muted); margin-top: var(--spacing-xs); text-align: right;">
              Resets at midnight CT
            </p>
          </div>
        </div>

        <div style="margin-bottom: var(--spacing-md);">
          <label for="chat-thread-selector" class="form-label">Load Sample Conversation:</label>
          <select id="chat-thread-selector" class="form-select">
            <option value="">Select a sample conversation...</option>
            <option value="budget">Budget Analysis</option>
            <option value="networth">Net Worth Tracking</option>
            <option value="subscriptions">Subscription Review</option>
          </select>
        </div>

        <div id="ai-chat-container" class="chat-container" style="position: relative;">
          <div id="privacy-block-overlay"
            style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 10; border-radius: var(--border-radius);">
            <div
              style="background: var(--bg-primary); padding: var(--spacing-xl); border-radius: var(--border-radius); text-align: center; max-width: 400px;">
              <p style="margin-bottom: var(--spacing-md);">Please accept the Privacy & User Agreement to access the AI
                Assistant.</p>
              <button id="open-privacy-modal" class="btn btn-primary">Review Agreement</button>
            </div>
          </div>
          <div id="ai-chat-messages" class="chat-messages" role="log" aria-live="polite" aria-label="Chat messages">
            <div class="chat-message chat-message-assistant">
              <div class="chat-message-content">
                <p>Hello! I'm your JuaLuma AI Assistant. I can help you understand your spending patterns, track your
                  net worth, review your subscriptions, and answer questions about your financial data.</p>
                <p style="margin-top: var(--spacing-sm);">What would you like to know?</p>
              </div>
              <div class="chat-message-time">10:15 AM</div>
            </div>
          </div>
          <div class="chat-input-container">
            <input type="text" id="chat-input" class="chat-input" placeholder="Ask me anything about your finances..."
              aria-label="Chat input" disabled>
            <button id="chat-send" class="btn btn-primary chat-send" disabled>Send</button>
          </div>
        </div>
      </div>

      <div class="glass-panel">
        <h2>AI Assistant Features</h2>
        <div class="grid grid-2">
          <div class="card">
            <h3>Budget Analysis</h3>
            <p>Get insights about your spending patterns and budget performance. Ask questions like "How am I doing with
              my budget this month?"</p>
          </div>
          <div class="card">
            <h3>Net Worth Tracking</h3>
            <p>Understand your net worth trends and see what's driving changes in your financial position over time.</p>
          </div>
          <div class="card">
            <h3>Subscription Review</h3>
            <p>Review all your recurring subscriptions and identify opportunities to save money.</p>
          </div>
          <div class="card">
            <h3>Spending Insights</h3>
            <p>Analyze your spending by category, merchant, or time period to identify trends and patterns.</p>
          </div>
        </div>
      </div>

      <div class="alert alert-info" style="margin-top: var(--spacing-xl);">
        <strong>Usage Limits:</strong> Free Tier: 20 queries/day (Gemini 2.5 Flash). Essential/Pro: 75 queries/day
        (Gemini 3 Pro). Ultimate: 200 queries/day (Gemini 3 Pro). Queries reset daily at midnight CT.
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-section">
          <h3>Product</h3>
          <ul>
            <li><a href="features.html">Features</a></li>
            <li><a href="pricing.html">Pricing</a></li>
            <li><a href="marketplace.html">Marketplace</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Support</h3>
          <ul>
            <li><a href="support.html">Contact Support</a></li>
            <li><a href="support.html#faq">FAQ</a></li>
            <li><a href="feature-request.html">Feature Request</a></li>
            <li><a href="legal/terms.html">Terms of Service</a></li>
            <li><a href="legal/privacy.html">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Company</h3>
          <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="about.html#mission">Mission</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Connect</h3>
          <div class="social-links">
            <a href="https://twitter.com/JuaLuma" class="social-link" target="_blank" rel="noopener noreferrer"
              aria-label="Twitter">ùïè</a>
            <a href="https://discord.gg/JuaLuma" class="social-link" target="_blank" rel="noopener noreferrer"
              aria-label="Discord"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z" />
              </svg></a>
            <a href="https://youtube.com/@JuaLuma" class="social-link" target="_blank" rel="noopener noreferrer"
              aria-label="YouTube"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
              </svg></a>
            <a href="https://tiktok.com/@JuaLuma" class="social-link" target="_blank" rel="noopener noreferrer"
              aria-label="TikTok"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z" />
              </svg></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Intellifide, LLC. All rights reserved.</p>
        <p style="margin-top: var(--spacing-sm); font-size: var(--font-size-xs);">
          JuaLuma is for informational and educational purposes only. JuaLuma does not provide financial, investment,
          tax, or legal advice. Always consult qualified professionals for financial decisions.
        </p>
      </div>
    </div>
  </footer>

  <script src="js/main.js"></script>
  <script>
    // Privacy Agreement Modal Handler
    (function () {
      const privacyModal = document.getElementById('privacy-agreement-modal');
      const privacyOverlay = document.getElementById('privacy-block-overlay');
      const openPrivacyBtn = document.getElementById('open-privacy-modal');
      const acceptBtn = document.getElementById('accept-privacy');
      const denyBtn = document.getElementById('deny-privacy');
      const policyScroll = document.getElementById('privacy-policy-scroll');
      const scrollHint = document.getElementById('privacy-scroll-hint');
      const chatInput = document.getElementById('chat-input');
      const chatSend = document.getElementById('chat-send');

      const setAcceptEnabled = (enabled) => {
        if (!acceptBtn) return;
        acceptBtn.disabled = !enabled;
        acceptBtn.setAttribute('aria-disabled', enabled ? 'false' : 'true');
        if (scrollHint) {
          scrollHint.textContent = enabled
            ? 'You can now accept and continue.'
            : 'Scroll to the bottom to enable ‚ÄúAccept & Continue‚Äù.';
        }
      };

      const checkPolicyScroll = () => {
        if (!policyScroll || !acceptBtn) return;
        const atBottom = policyScroll.scrollTop + policyScroll.clientHeight >= policyScroll.scrollHeight - 4;
        setAcceptEnabled(atBottom);
      };

      if (policyScroll) {
        policyScroll.addEventListener('scroll', checkPolicyScroll);
      }

      const privacyAccepted = localStorage.getItem('JuaLuma_privacy_accepted');
      if (!privacyAccepted) {
        // Show modal on load
        setTimeout(() => {
          if (privacyModal) {
            JuaLuma.Modal.open('privacy-agreement-modal');
          }
          if (policyScroll) {
            policyScroll.scrollTop = 0;
            setAcceptEnabled(false);
          }
        }, 500);
      } else {
        // Already accepted - enable chat
        if (privacyOverlay) privacyOverlay.style.display = 'none';
        if (chatInput) chatInput.disabled = false;
        if (chatSend) chatSend.disabled = false;
      }

      if (openPrivacyBtn) {
        openPrivacyBtn.addEventListener('click', () => {
          JuaLuma.Modal.open('privacy-agreement-modal');
          if (policyScroll) {
            policyScroll.scrollTop = 0;
            setAcceptEnabled(false);
          }
        });
      }

      if (acceptBtn) {
        acceptBtn.addEventListener('click', () => {
          localStorage.setItem('JuaLuma_privacy_accepted', 'true');
          JuaLuma.Modal.close(privacyModal);
          if (privacyOverlay) privacyOverlay.style.display = 'none';
          if (chatInput) chatInput.disabled = false;
          if (chatSend) chatSend.disabled = false;
        });
      }

      if (denyBtn) {
        denyBtn.addEventListener('click', () => {
          JuaLuma.Modal.close(privacyModal);
          // Keep overlay visible, chat remains blocked
        });
      }
    })();
  </script>
</body>

</html>